---
type: specs.openrewrite.org/v1beta/recipe
name: com.petclinic.framework.JavaMigrationToJava21
displayName: Spring Framework PetClinic Java 21 Migration
description: Complete migration for Spring Framework PetClinic from Java 17 to Java 21
recipeList:
  # Core Java 21 migration
  - org.openrewrite.java.migrate.UpgradeToJava21
  
  # Jakarta EE migrations (this project uses Jakarta, not javax)
  - org.openrewrite.java.migrate.jakarta.JavaxMigrationToJakarta
  
  # Remove deprecated APIs
  - org.openrewrite.java.migrate.RemovedLegacyApis
  
  # Use newer Java features
  - org.openrewrite.java.migrate.lang.UseTextBlocks
  - org.openrewrite.java.migrate.lang.UseVar
  
  # Code cleanup and modernization
  - org.openrewrite.staticanalysis.CommonStaticAnalysis
  - org.openrewrite.staticanalysis.DefaultComesLast
  - org.openrewrite.staticanalysis.EmptyBlock
  - org.openrewrite.staticanalysis.FinalizePrivateFields
  - org.openrewrite.staticanalysis.RemoveUnusedLocalVariables
  - org.openrewrite.staticanalysis.RemoveUnusedPrivateFields
  - org.openrewrite.staticanalysis.UnnecessaryCloseInTryWithResources
  
  # Formatting
  - org.openrewrite.java.format.AutoFormat

---
type: specs.openrewrite.org/v1beta/recipe
name: com.petclinic.framework.UpdateDependencies
displayName: Update Spring Framework PetClinic Dependencies
description: Update dependencies to versions compatible with Java 21
recipeList:
  # Update Hibernate to latest 7.x
  - org.openrewrite.java.dependencies.UpgradeDependencyVersion:
      groupId: org.hibernate.orm
      artifactId: "*"
      newVersion: 7.2.x
  
  # Update Hibernate Validator
  - org.openrewrite.java.dependencies.UpgradeDependencyVersion:
      groupId: org.hibernate.validator
      artifactId: hibernate-validator
      newVersion: 9.1.x
  
  # Update SLF4J
  - org.openrewrite.java.dependencies.UpgradeDependencyVersion:
      groupId: org.slf4j
      artifactId: "*"
      newVersion: 2.0.x
  
  # Update Logback
  - org.openrewrite.java.dependencies.UpgradeDependencyVersion:
      groupId: ch.qos.logback
      artifactId: "*"
      newVersion: 1.5.x
  
  # Update JUnit Jupiter
  - org.openrewrite.java.dependencies.UpgradeDependencyVersion:
      groupId: org.junit.jupiter
      artifactId: "*"
      newVersion: 6.0.x
  
  # Update Mockito
  - org.openrewrite.java.dependencies.UpgradeDependencyVersion:
      groupId: org.mockito
      artifactId: "*"
      newVersion: 5.x
  
  # Update AssertJ
  - org.openrewrite.java.dependencies.UpgradeDependencyVersion:
      groupId: org.assertj
      artifactId: "*"
      newVersion: 3.27.x

---
type: specs.openrewrite.org/v1beta/recipe
name: com.petclinic.framework.HibernateUpdates
displayName: Hibernate 7.x Migration
description: Migrate to Hibernate 7.x for Java 21 compatibility
recipeList:
  # Hibernate-specific migrations
  - org.openrewrite.java.migrate.jakarta.JakartaEE10
  
  # Update deprecated Hibernate APIs
  - org.openrewrite.java.migrate.UpgradeToJava21

---
type: specs.openrewrite.org/v1beta/recipe
name: com.petclinic.framework.ServletUpdates
displayName: Servlet 6.x Updates
description: Update for Servlet 6.x (Jakarta EE 10)
recipeList:
  # Servlet API migrations
  - org.openrewrite.java.migrate.jakarta.JavaxServletToJakartaServlet
  
  # JSP and JSTL migrations
  - org.openrewrite.java.migrate.jakarta.JavaxPersistenceToJakartaPersistence

---
type: specs.openrewrite.org/v1beta/recipe
name: com.petclinic.framework.TestingUpdates
displayName: Update Testing Framework
description: Update JUnit and testing dependencies
recipeList:
  # JUnit 5 best practices
  - org.openrewrite.java.testing.junit5.JUnit5BestPractices
  - org.openrewrite.java.testing.junit5.AssertToAssertions
  - org.openrewrite.java.testing.junit5.ExpectedExceptionToAssertThrows
  
  # Mockito updates
  - org.openrewrite.java.testing.mockito.Mockito1to5Migration

---
type: specs.openrewrite.org/v1beta/recipe
name: com.petclinic.framework.SpringFrameworkUpdates
displayName: Spring Framework 7.x Best Practices
description: Apply Spring Framework 7.x best practices
recipeList:
  # Use modern Spring patterns
  - org.openrewrite.java.spring.framework.MigrateWebMvcConfigurer
  
  # Update Spring annotations
  - org.openrewrite.java.spring.framework.UpgradeSpringFramework_7_0

---
type: specs.openrewrite.org/v1beta/recipe
name: com.petclinic.framework.CompleteMigration
displayName: Complete Spring Framework PetClinic Migration
description: Run all migration recipes for complete Java 21 migration
recipeList:
  - com.petclinic.framework.JavaMigrationToJava21
  - com.petclinic.framework.UpdateDependencies
  - com.petclinic.framework.HibernateUpdates
  - com.petclinic.framework.ServletUpdates
  - com.petclinic.framework.TestingUpdates
  - com.petclinic.framework.SpringFrameworkUpdates
